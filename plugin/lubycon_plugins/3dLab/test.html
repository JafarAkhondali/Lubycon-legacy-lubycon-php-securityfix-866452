<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<!--<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" />-->
	
	<script type="text/javascript" src="jquery-1.12.2.js"></script>
	<style>
		canvas {
			width: 100%;
			height: 90%;
		}
		#imgInput {
			position: fixed;
			top: 10px;
			left: 10px;
			color: #ffffff;
		}
		.testBtWrap {
			display: inline-block;
			position: fixed;
			top: 100px;
			left: 100px;
		}
		.testBt {
			position: relative;
			width: 100px;
			height: 50px;
			color: #ffffff;
			background: #444444;
			transition: background 0.4s;
			border: none;
			cursor: pointer;
		}
		.testBt:hover {
			background: #48cfad;
		}
	</style>
</head>
<body>
	<input type="file" id="imgInput" />
	<script type="text/javascript" src="three.min.js"></script>
	<script type="text/javascript" src=""></script>
	<script>
		//three.js
		var scene = new THREE.Scene(), //canvas scene
		canvasWidth = window.innerWidth,
		canvasHeight = window.innerHeight*0.9,
		psCamera = new THREE.PerspectiveCamera(75,canvasWidth/canvasHeight,0.1,1000),
		renderer = new THREE.WebGLRenderer(),
		object = new THREE.BoxGeometry( 1, 1, 1 ),
		mat = new THREE.MeshPhongMaterial({
			ambient: 0x48cfad, 
			color: 0x48cfad, 
			specular: 0xffffff, 
			shininess: 50, 
			shading: THREE.SmoothShading
		}),
		mesh = new THREE.Mesh(object,mat),

		aLight = new THREE.AmbientLight(0xffffff);
		dLight = new THREE.DirectionalLight( 0xffffff, 1);
		dLight.position.set(1,2,1);

		renderer.setSize(window.innerWidth, window.innerHeight);
		$("body").append(renderer.domElement);
		scene.add(mesh);
		scene.add(dLight,aLight);

		psCamera.position.z = 5;

		function render() {
			requestAnimationFrame( render );
			mesh.rotation.x += 0.01;
			mesh.rotation.y += 0.01;
			renderer.render( scene, psCamera );
		}
		render();

		//jqeury
		$("canvas").attr("id","webgl");
		var btwrap = $("<div/>",{
			"class" : "testBtWrap"
		}).appendTo("body")
		var cubeBt = $("<button/>",{
			"class" : "testBt",
			"html" : "Change width of object"
		}).on("click",objWidth).appendTo(btwrap);
		var cameraBt = $("<button/>",{
			"class" : "testBt",
			"html" : "Change position of camera"
		}).on("click",distanceCamera).appendTo(btwrap);

		$("#imgInput").on("change",imgUpload);


		function objWidth() {
			var $this = $(this),
			$target = mesh;
			if($this.hasClass("selected")) $this.removeClass("selected"),$target.scale.set(1,1,1);
			else if(!$this.hasClass("selected")) $this.addClass("selected"),$target.scale.set(2,1,1);
		}
		function distanceCamera() {
			var $this = $(this),
			$target = psCamera;
			if($this.hasClass("selected")) $this.removeClass("selected"),$target.position.z = 5;
			else if(!$this.hasClass("selected")) $this.addClass("selected"),$target.position.z = 10;
		}
		function imgUpload(event) {
			var $object = event.target.files;

			$.each($object, function(i,file){
                var reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = function(event){
                	var image = document.createElement( 'img' );
					image.src = event.target.result;
                    mesh.material.map = new THREE.Texture( image );
                };
            });
		}
	</script>
</body>
</html>